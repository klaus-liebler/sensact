cmake_minimum_required(VERSION 3.5)
set(PROJECT_VER "0.0.0.1")

set(GENERATED_DIR "C:/repos/generated/")
set(USERPROFILE $ENV{USERPROFILE})

set(EXTRA_COMPONENT_DIRS "C:/repos/espidf-components" "C:/repos/sensact/espidf-components" "C:/repos/espidf-components-lcd" "C:/repos/espidf-component-webmanager")
set(EXCLUDE_COMPONENTS "C:/repos/espidf-components/esp32-owb")

file(READ "${GENERATED_DIR}/cmake/config.json" config_json)
string(JSON SENSACT_NODE_NAME GET "${config_json}" SENSACT_NODE_NAME)
string(JSON SENSACT_MODEL_NAME GET "${config_json}" SENSACT_MODEL_NAME)
string(JSON SENSACT_MODEL_CREATED_DT GET "${config_json}" SENSACT_MODEL_CREATED_DT)
string(JSON SENSACT_MODEL_CREATED_DT_STRING GET "${config_json}" SENSACT_MODEL_CREATED_DT_STRING)
string(JSON NODE_ID GET "${config_json}" NODE_ID)
string(JSON HOSTNAME GET "${config_json}" HOSTNAME)
string(JSON BOARD_NAME GET "${config_json}" BOARD_NAME)
string(JSON BOARD_VERSION GET "${config_json}" BOARD_VERSION)
string(JSON BOARD_MAC GET "${config_json}" BOARD_MAC)
string(JSON APP_NAME GET "${config_json}" APP_NAME)
string(JSON APP_VERSION GET "${config_json}" APP_VERSION)
string(JSON CREATION_DT GET "${config_json}" CREATION_DT)
string(JSON CREATION_DT_STR GET "${config_json}" CREATION_DT_STR)
string(JSON GIT_SHORT_HASH GET "${config_json}" GIT_SHORT_HASH)
string(JSON BANNER GET "${config_json}" BANNER)
string(JSON BOARD_DIRECTORY GET "${config_json}" BOARD_DIRECTORY)

message(STATUS "Build for BOARD ${BOARD_NAME} with MAC ${BOARD_MAC}")

include($ENV{IDF_PATH}/tools/cmake/project.cmake)
project(sensact_firmware)